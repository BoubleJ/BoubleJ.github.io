---
date: "2024-04-18"
title: "[React] Jest를 이용해보자"
categories: ["React"]
summary: "프론트엔드도 TDD를 구현할 수 있습니다. 아니 구현해야합니다."
thumbnail: "./제스트.png"
---

테스팅 라이브러리인 jest를 사용해보도록 합시다.

Jest에 대해서 간략하게 설명드리자면

# Jest

Jest는 페이스북에서 만들어서 React와 더불어 많은 자바스크립트 개발자들에게 사랑받고 있는 테스팅 라이브러리입니다. 출시 초기에는 프론트엔드에서 주로 쓰였지만 최근에는 백엔드에서도 기존의 자바스크립트 테스팅 라이브러리를 대체하고 있습니다.

페이스북에서는 Jest를 단순한 테스팅 라이브러리가 아닌 “테스팅 프레임워크”라고 부르는 만큼 기존 자바스크립트 테스팅 라이브러리와는 차별점이 있습니다. Jest 이전에는 자바스크립트 코드를 테스트하라면 여러 가지 테스팅 라이브러리를 조합해서 사용해야 했는데요.

예를 들어, Mocha나 Jasmin을 Test Runner로 사용하고, Chai나 Expect와 같은 Test Matcher를 사용했으며, 또한 Sinon과 Testdouble 같은 Test Mock 라이브러리도 필요했었습니다. 이 라이브러리들은 굉장히 유사하지만 살짝씩 다른 API를 가지고 있었기 때문에, 여러 프로젝트에 걸쳐서 일하는 자바스크립트 개발자들에게 혼란을 주기도 했는데요. 하지만 이제는 Jest는 라이브러리 하나만 설치하면, Test Runner와 Test Matcher 그리고 Test Mock까지 몽땅 해결이 됩니다.

한마디로 테스트 계의 올인원과 같은 존재라고 보면 될 것 같습니다.

<br><br>

# Jest 설치 및 적용

이제 제가 진행하는 프로젝트에 Jest 라이브러리를 설치해줍니다.

```shell
 npm i -D jest

```

jest 는 개발할 때만 사용하기 때문에 -D(개발 의존성)을 붙여줍니다.

<br>

## test 스크립트 수정

package.json 파일을 열고 test 스크립트를 jest로 수정해줍니다.

```js
//package.json

//생략

  "scripts": {
    "test": "jest"
  },

    //생략
```

이렇게 해줌으로써 터미널에 npm test라고 입력하면 jest 커맨드를 실행할 수 있습니다. jest 커맨드를 전역으로 설치할 수도 있겠지만, 실제 프로젝트에서는 스크립트로 등록해놓고 사용하는 경우가 많습니다.

## 테스트

이제 잘 동작하는지 간단한 코드로 실험해봅시다.

Jest는 기본적으로 `test.js`로 끝나거나, `__test__` 디렉터리 안에 있는 파일들은 모두 테스트 파일로 인식합니다. 프로젝트 루트 디렉토리에 `__test__` 디렉터리를 만들고 `test.js`을 생성해줍니다.

📦**test**
┗ 📜test.js

만약 특정 테스트 파일만 실행하고 싶은 경우에는 `npm test <파일명 이나 경로>`를 입력하면 됩니다.

```js
//test.js

test("1 is 1", () => {
  expect(1).toBe(1);
});
```

그리고

```shell
npm test

```

명령어를 실행하면 다음과 같이 초록색 글씨로 테스트가 통과했다고 나옵니다.

![](https://velog.velcdn.com/images/dogmnil2007/post/fd4f34f2-d0dc-4eb0-810e-baad2d7747a6/image.png)

## 테스트 패턴

기본적으로 테스트는 다음과 같이 일정한 패턴으로 작성합니다.

```js
test("테스트 설명", () => {
  expect("검증 대상").toXxx("기대 결과");
});
```

첫 번째 매개변수인 테스트 설명은 말 그대로 테스트를 설명하는 내용을 작성하면 됩니다. 다른 개발자가 알아보기 쉽게 구체적이고 명확하게 작성해야겠죠.
두 번째 매개변수의 expect함수 매개변수는 검증 대상입니다. 테스트 하고싶은 함수, 객체, 변수 등등을 넣어주면 됩니다.
toXxx 함수의 매개변수는 expect함수 매개변수로 넣은 함수에 기대하는 결과값을 넣어주면 됩니다.

toXxx 부분에서 사용되는 함수를 흔히 `Test Matcher`라고 하는데요. 위에서 사용된 `toBe()` 함수는 숫자나 문자와 같은 객체가 아닌 기본형(primitive) 값을 비교할 때 사용됩니다.

Jest 에서는 거의 상상 가능한 모든 경우에 대한 Matcher 함수를 제공한다고 합니다.

`toBe()` 이 외에도 `toBeTruthy()`, `toBeFalsy()`, `toEqual()` 등 다양한 종류의 함수가 존재합니다.

> 이에 대한 자세한 설명은 추후 포스팅하겠습니다.
> 이번 포스팅은 본 프로젝트에 테스트 코드를 적용시켜 TDD (테스트 주도 개발)을 실현시키는 내용 위주로 작성하겠습니다.
